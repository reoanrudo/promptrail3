//
//  AdvancedPrompts.swift
//  promptrail3
//
//  Created by 田口怜央 on 2025/11/19.
//

import Foundation

// MARK: - Advanced Prompt Data Generator
struct AdvancedPrompts {

    static func generate(categories: [Category], tasks: [PromptTask]) -> [Prompt] {
        let categoryMap = Dictionary(uniqueKeysWithValues: categories.map { ($0.name, $0.id) })
        let taskMap = Dictionary(uniqueKeysWithValues: tasks.map { ($0.name, $0.id) })

        return [
            // MARK: - 1. SEO最適化ブログ記事構成ジェネレーター
            Prompt(
                title: "SEO最適化ブログ記事構成ジェネレーター",
                body: """
あなたはSEOとコンテンツマーケティングの専門家であり、月間100万PVのメディアを複数運営してきた実績があります。

## ゴール
以下の条件で、検索上位表示と読者満足を両立するブログ記事の構成案を作成してください。

## 入力情報
- メインキーワード：{メインキーワード}
- サブキーワード（任意）：{サブキーワード}
- ターゲット読者：{ターゲット読者の属性・課題}
- 記事の目的：{情報提供/問題解決/商品紹介/リード獲得}
- 想定文字数：{文字数}
- 競合との差別化ポイント：{自社の強み・独自情報}

## 出力フォーマット

### 1. 検索意図の分析
- ユーザーの顕在ニーズ（3つ）
- ユーザーの潜在ニーズ（3つ）
- 検索ステージ（認知/検討/決定）

### 2. 記事タイトル案（5パターン）
それぞれ以下の型を使用：
- 数字訴求型
- How to型
- 疑問解決型
- 比較型
- 体験談型

### 3. 構成案（H2/H3の見出し構成）
各見出しに以下を付記：
- 想定文字数
- 含めるべきキーワード
- 読者心理（この段階で読者は何を考えているか）

### 4. リード文（導入120字）
- PASONAの法則に基づいて作成

### 5. 記事内CTA設計
- CTA①（記事中盤）：配置位置と訴求内容
- CTA②（記事末尾）：配置位置と訴求内容

### 6. 内部リンク戦略
- 関連記事として相性が良いトピック（3つ）

ステップバイステップで論理的に考え、各セクションの意図も簡潔に説明してください。
""",
                description: "検索上位を狙えるブログ記事の構成を、ペルソナ分析からCTA設計まで一気通貫で作成します。E-E-A-Tを意識した構成で、読者の検索意図を満たしながら回遊・コンバージョンにつなげます。",
                categoryId: categoryMap["ライティング"]!,
                taskId: taskMap["アイデア出し"]!,
                authorName: "公式（高度版）",
                likeCount: 523,
                favoriteCount: 412,
                useCount: 1892
            ),

            // MARK: - 2. 高返信率コールドメール作成システム
            Prompt(
                title: "高返信率コールドメール作成システム",
                body: """
あなたはBtoB営業の専門家であり、コールドメールで平均返信率15%以上を達成してきたトップセールスです。行動経済学とセールスライティングに精通しています。

## ゴール
見込み顧客からの返信を獲得する営業メールを作成してください。
成功指標：開封率30%以上、返信率10%以上を目指す構成

## 入力情報
- 自社サービス/製品：{サービス名と概要}
- 主な提供価値：{解決できる課題・ベネフィット}
- ターゲット企業の属性：{業種/規模/部門}
- 想定される受信者の役職：{役職名}
- 受信者の抱える課題（仮説）：{想定課題}
- 差別化ポイント：{競合との違い}
- 希望するネクストアクション：{返信/資料DL/ミーティング設定}
- トーン：{フォーマル/ビジネスカジュアル/親しみやすい}

## 出力フォーマット

### 件名（5パターン）
各パターンに使用している心理トリガーを注記：
- パターンA（好奇心喚起型）
- パターンB（具体的数字型）
- パターンC（課題指摘型）
- パターンD（共通点アプローチ型）
- パターンE（質問型）

### メール本文

#### 【バージョン1：PAS型（Problem-Agitate-Solution）】
- オープニング（1文、パーソナライズ要素）
- 課題の指摘（具体的に）
- 課題を放置した場合の損失
- 解決策の提示
- 実績・社会的証明（1つ）
- CTA（低ハードル）
- 署名

#### 【バージョン2：AIDA型】
- Attention：注意を引く1文
- Interest：興味を持たせる情報
- Desire：欲求を刺激する具体的ベネフィット
- Action：明確なCTA

#### 【バージョン3：ストレートアプローチ型】
- 極めて簡潔（100字以内）
- 要件のみを端的に
- Yes/Noで答えられる質問で締める

### 送信タイミングの推奨
- 曜日・時間帯と理由

### フォローアップメール（1回目）
- 送信タイミング
- 本文（元メールの要約+新しい価値提供）

意思決定のハードルを下げる表現を意識し、押し売り感を排除した文面にしてください。
""",
                description: "開封率・返信率を最大化する営業メールを、行動経済学と営業心理学に基づいて作成します。件名から署名まで、A/Bテスト用の複数バージョンを生成します。",
                categoryId: categoryMap["ビジネス"]!,
                taskId: taskMap["文章生成"]!,
                authorName: "公式（高度版）",
                likeCount: 487,
                favoriteCount: 398,
                useCount: 1654
            ),

            // MARK: - 3. 新規事業アイデア構造化ジェネレーター
            Prompt(
                title: "新規事業アイデア構造化ジェネレーター",
                body: """
あなたは新規事業開発のエキスパートであり、0→1フェーズのスタートアップを複数成功に導いた経験を持つシリアルアントレプレナーです。デザイン思考とリーンスタートアップの手法に精通しています。

## ゴール
以下の条件から、実現可能性と市場性を兼ね備えた新規事業アイデアを5つ生成し、それぞれを評価してください。

## 入力情報
- 事業ドメイン/業界：{業界}
- 自社の強み・リソース：{技術/人材/顧客基盤/ブランドなど}
- 投資可能な予算規模：{金額またはレベル}
- 参入したい市場トレンド：{興味のある領域}
- 避けたい領域/制約：{やりたくないこと/できないこと}
- 想定するターゲット顧客：{BtoB/BtoC/セグメント}
- 収益化までの希望期間：{〇ヶ月/〇年}

## 思考プロセス
以下のフレームワークを組み合わせて発想してください：
1. Jobs to be Done：顧客が本当に達成したい仕事は何か
2. ブルーオーシャン戦略：競合のいない市場空間はどこか
3. 両利きの経営：既存事業とのシナジーはどこにあるか

## 出力フォーマット

各アイデアについて以下の構成で出力：

### アイデア [番号]：[アイデア名]

#### 1. エレベーターピッチ（30秒で説明）

#### 2. 解決する課題
- 顧客のペイン（3つ）
- 既存解決策とその不満

#### 3. ソリューション概要
- コアバリュー
- 提供方法

#### 4. リーンキャンバス（簡易版）
| 項目 | 内容 |
|------|------|
| 課題 | ... |
| 顧客セグメント | ... |
| 独自の価値提案 | ... |
| ソリューション | ... |
| チャネル | ... |
| 収益の流れ | ... |
| コスト構造 | ... |
| 主要指標 | ... |
| 圧倒的な優位性 | ... |

#### 5. 市場規模（TAM/SAM/SOM概算）

#### 6. 参入障壁と競合優位性

#### 7. 初期検証アクション
- 1週間でできるMVP検証方法
- 検証すべき最もリスクの高い仮説

#### 8. 事業性スコア（5段階評価）
- 市場性：★★★★☆
- 実現可能性：★★★☆☆
- 自社シナジー：★★★★★
- 収益性：★★★☆☆
- 総合：★★★★☆

---

最後に、5つのアイデアを「短期で成果が出やすい順」と「長期的なインパクトが大きい順」でランキングしてください。
""",
                description: "自社リソースと市場機会を掛け合わせた新規事業アイデアを、事業性評価付きで複数生成します。リーンキャンバス形式で即座に仮説検証に移行できます。",
                categoryId: categoryMap["ビジネス"]!,
                taskId: taskMap["アイデア出し"]!,
                authorName: "公式（高度版）",
                likeCount: 612,
                favoriteCount: 534,
                useCount: 2341
            ),

            // MARK: - 4. ストーリーテリング型プレゼン構成設計
            Prompt(
                title: "ストーリーテリング型プレゼン構成設計",
                body: """
あなたは世界的なプレゼンテーションコーチであり、TEDxスピーカーのトレーニングや大企業の経営層向けプレゼンコンサルティングを行ってきました。ストーリーテリングの技術に精通しています。

## ゴール
聴衆の心を動かし、具体的なアクションにつなげるプレゼンテーションの構成を作成してください。

## 入力情報
- プレゼンのテーマ：{テーマ}
- 目的：{承認獲得/販売/教育/啓発}
- 聴衆：{人数/役職/事前知識レベル}
- 発表時間：{分}
- 望む聴衆の行動：{プレゼン後に何をしてほしいか}
- 伝えたいキーメッセージ：{1つに絞る}
- 使える事例やデータ：{事例/数字/エピソード}
- プレゼン形式：{対面/オンライン/ハイブリッド}

## 出力フォーマット

### 1. オープニング戦略（最初の30秒）
- フック（3パターン）
  - 衝撃的な統計
  - 個人的なストーリー
  - 挑発的な質問
- 推奨パターンとその理由

### 2. 全体構造（三幕構成）

#### 第一幕：セットアップ（全体の25%）
- 現状の課題/痛み
- 聴衆との共感ポイント
- 「でも、もし〜だったら？」の転換点

#### 第二幕：コンフリクトと解決（全体の50%）
- 解決策の提示
- 3つの柱（または3つの理由/3つのステップ）
- 各柱を支える具体例/データ
- 予想される反論と対処

#### 第三幕：解決と行動喚起（全体の25%）
- ビフォーアフターの対比
- キーメッセージの再強調
- 明確なCall to Action
- 余韻を残すクロージング

### 3. スライドごとの構成（表形式）

| # | スライドタイトル | 話す内容（キーフレーズ） | ビジュアル指示 | 時間配分 |
|---|---|---|---|---|
| 1 | ... | ... | ... | 30秒 |
| 2 | ... | ... | ... | 1分 |

### 4. 感情曲線
プレゼン全体を通じた聴衆の感情の推移を表現

### 5. リハーサルチェックリスト
- 声の抑揚をつけるべきポイント
- 間を取るべきポイント
- ジェスチャーを入れるべきポイント
- 聴衆に問いかけるポイント

聴衆の「なぜ聞く必要があるのか」を常に意識し、論理と感情の両方に訴える構成にしてください。
""",
                description: "聴衆を惹きつけ、行動を促すプレゼンテーションの構成を、ハリウッド脚本術とTEDメソッドに基づいて設計します。スライドごとの話す内容とビジュアル指示付き。",
                categoryId: categoryMap["ビジネス"]!,
                taskId: taskMap["アイデア出し"]!,
                authorName: "公式（高度版）",
                likeCount: 445,
                favoriteCount: 367,
                useCount: 1423
            ),

            // MARK: - 5. 戦略的競合分析フレームワーク
            Prompt(
                title: "戦略的競合分析フレームワーク",
                body: """
あなたは戦略コンサルタントとして、Fortune 500企業の競争戦略立案を支援してきた経験があります。ポーターの競争戦略論、ブルーオーシャン戦略、ジョブ理論に精通しています。

## ゴール
提供された情報をもとに、競合環境を多角的に分析し、自社が取るべき差別化戦略を提案してください。

## 入力情報
- 自社の商品/サービス：{自社サービス概要}
- 自社の強み：{技術/ブランド/価格/サポート等}
- 主要競合（3〜5社）：{競合企業名とサービス名}
- ターゲット市場：{市場セグメント}
- 現在の課題意識：{何に困っているか/何を知りたいか}

## 出力フォーマット

### 1. 業界構造分析（ポーターの5つの力）

| 力 | 強度 | 根拠 | 自社への影響 |
|---|---|---|---|
| 業界内の競争 | 高/中/低 | ... | ... |
| 新規参入の脅威 | 高/中/低 | ... | ... |
| 代替品の脅威 | 高/中/低 | ... | ... |
| 買い手の交渉力 | 高/中/低 | ... | ... |
| 売り手の交渉力 | 高/中/低 | ... | ... |

### 2. 競合ポジショニングマップ
2軸でのポジショニングを言語的に説明

### 3. 各競合の詳細分析
- ターゲット顧客
- 提供価値
- 価格戦略
- 強み（3つ）
- 弱み（3つ）
- 最近の動き

### 4. 戦略キャンバス比較

| 競争要因 | 自社 | 競合A | 競合B | 競合C |
|---|---|---|---|---|
| 価格 | ●●●○○ | ●●○○○ | ●●●●○ | ●●●○○ |
| 機能数 | ... | ... | ... | ... |

### 5. 自社のSWOT分析

### 6. クロスSWOT戦略オプション
- SO戦略（強み×機会）
- WO戦略（弱み×機会）
- ST戦略（強み×脅威）
- WT戦略（弱み×脅威）

### 7. 差別化戦略の提案（3つ）
各提案について：
- 戦略の概要
- なぜ勝てるのか
- 必要なリソース/投資
- リスクと対策

### 8. 次のアクション（優先度順）
- 短期（1ヶ月以内）
- 中期（3ヶ月以内）
- 長期（6ヶ月以上）

分析は仮説ベースで構いませんが、各結論に至った論拠を明示してください。
""",
                description: "競合他社を多角的に分析し、自社の差別化戦略を導き出します。ポーターの5F、SWOT、戦略キャンバスを組み合わせた包括的なアウトプットを生成します。",
                categoryId: categoryMap["分析・リサーチ"]!,
                taskId: taskMap["分析"]!,
                authorName: "公式（高度版）",
                likeCount: 534,
                favoriteCount: 456,
                useCount: 1987
            )
        ]
    }
}
